From 217a0d972f4f0688e1ab4539098ba8366761c681 Mon Sep 17 00:00:00 2001
From: Pier Luigi Fiorini <pierluigi.fiorini@gmail.com>
Date: Thu, 30 Jul 2015 19:14:50 +0200
Subject: [PATCH 11/46] Use the new Travis CI workers

---
 .travis.yml | 39 ++++++++++++++++++++-------------------
 1 file changed, 20 insertions(+), 19 deletions(-)

diff --git a/.travis.yml b/.travis.yml
index 5e6edb9..b5ec7b2 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -1,33 +1,33 @@
 language: cpp
 
+cache: ccache
+
+sudo: false
+
 compiler:
   - gcc
 
-before_install:
-  # gcc
-  - if [ "$CXX" == "g++" ]; then sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test; fi
-  # clang
-  - if [ "$CXX" == "clang++" ]; then sudo add-apt-repository -y ppa:h-rayflood/llvm; fi
-
-  - sudo apt-add-repository -y ppa:ubuntu-sdk-team/ppa
-#  - sudo add-apt-repository ppa:czchen/travis-ci -y
-  - sudo apt-get update -y
+addons:
+  apt:
+    sources:
+    - ubuntu-toolchain-r-test
+    - ubuntu-sdk-team
+#    - llvm-toolchain-precise
+  apt:
+    packages:
+    - g++-4.8
+    - qtdeclarative5-dev
+    - qttools5-dev
+    - qttools5-dev-tools
 
 install:
-  # gcc
-  - if [ "$CXX" = "g++" ]; then sudo apt-get install -qq g++-4.8; fi
-  - if [ "$CXX" = "g++" ]; then export CXX="g++-4.8"; fi
-  # clang
-  - if [ "$CXX" == "clang++" ]; then sudo apt-get install --allow-unauthenticated -qq clang-3.4; fi
-  - if [ "$CXX" == "clang++" ]; then export CXX="clang++-3.4"; fi
-
-  # qt
-  - sudo apt-get install qtdeclarative5-dev qttools5-dev qttools5-dev-tools
-
+  # compiler
+  - export CXX="g++-4.8"
   # cmake
   - wget http://www.cmake.org/files/v3.3/cmake-3.3.0-Linux-x86_64.tar.gz -O /tmp/cmake.tar.gz
   - tar -xzf /tmp/cmake.tar.gz
   - export PATH=$PWD/cmake-3.3.0-Linux-x86_64/bin:$PATH
+  - cmake --version
   # e-c-m
   - wget http://download.kde.org/stable/frameworks/5.12/extra-cmake-modules-5.12.0.tar.xz
   - tar -xJf extra-cmake-modules-5.12.0.tar.xz
@@ -35,6 +35,7 @@ install:
   - export PATH=$HOME/ecm/bin:$PATH
 
 before_script:
+  - echo $PATH
   - mkdir build
   - cd build
   - cmake ..
-- 
1.9.5

