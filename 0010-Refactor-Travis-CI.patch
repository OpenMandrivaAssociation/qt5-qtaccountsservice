From ce77ac243c5fe20378e267dd76ffa6b760da9aa7 Mon Sep 17 00:00:00 2001
From: Pier Luigi Fiorini <pierluigi.fiorini@gmail.com>
Date: Thu, 30 Jul 2015 18:59:22 +0200
Subject: [PATCH 10/46] Refactor Travis CI

---
 .travis.yml | 14 +++++++++-----
 1 file changed, 9 insertions(+), 5 deletions(-)

diff --git a/.travis.yml b/.travis.yml
index 8093cdd..5e6edb9 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -4,11 +4,13 @@ compiler:
   - gcc
 
 before_install:
+  # gcc
   - if [ "$CXX" == "g++" ]; then sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test; fi
+  # clang
   - if [ "$CXX" == "clang++" ]; then sudo add-apt-repository -y ppa:h-rayflood/llvm; fi
 
   - sudo apt-add-repository -y ppa:ubuntu-sdk-team/ppa
-  - sudo add-apt-repository ppa:czchen/travis-ci -y
+#  - sudo add-apt-repository ppa:czchen/travis-ci -y
   - sudo apt-get update -y
 
 install:
@@ -19,18 +21,20 @@ install:
   - if [ "$CXX" == "clang++" ]; then sudo apt-get install --allow-unauthenticated -qq clang-3.4; fi
   - if [ "$CXX" == "clang++" ]; then export CXX="clang++-3.4"; fi
 
+  # qt
   - sudo apt-get install qtdeclarative5-dev qttools5-dev qttools5-dev-tools
 
+  # cmake
+  - wget http://www.cmake.org/files/v3.3/cmake-3.3.0-Linux-x86_64.tar.gz -O /tmp/cmake.tar.gz
+  - tar -xzf /tmp/cmake.tar.gz
+  - export PATH=$PWD/cmake-3.3.0-Linux-x86_64/bin:$PATH
+  # e-c-m
   - wget http://download.kde.org/stable/frameworks/5.12/extra-cmake-modules-5.12.0.tar.xz
   - tar -xJf extra-cmake-modules-5.12.0.tar.xz
   - cd extra-cmake-modules-5.12.0 && mkdir build && cd build && cmake .. -DCMAKE_INSTALL_PREFIX=$HOME/ecm && make && make install
   - export PATH=$HOME/ecm/bin:$PATH
 
 before_script:
-  - wget http://www.cmake.org/files/v3.3/cmake-3.3.0-Linux-x86_64.tar.gz -O /tmp/cmake.tar.gz
-  - tar -xzf /tmp/cmake.tar.gz
-  - export PATH=$PWD/cmake-3.3.0-Linux-x86_64/bin:$PATH
-
   - mkdir build
   - cd build
   - cmake ..
-- 
1.9.5

